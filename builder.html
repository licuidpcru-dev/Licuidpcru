<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Builder | Liquid-PC</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700;900&display=swap');

        :root {
            --bg: #000000;
            --accent: #00f0ff;
            --surface: rgba(255, 255, 255, 0.03);
            --surface-hover: rgba(255, 255, 255, 0.07);
            --border: rgba(255, 255, 255, 0.1);
            --error: #ff3b30;
            --success: #34c759;
            --apple-ease: cubic-bezier(0.4, 0, 0.2, 1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        
        /* Исправлено: добавлена видимость по умолчанию, если скрипт вдруг не отработает */
        body { 
            background: var(--bg); 
            color: #fff; 
            min-height: 100vh; 
            overflow-x: hidden; 
            opacity: 0; 
            transition: opacity 0.5s ease; 
        }
        body.loaded { opacity: 1; }

        /* --- LOADER --- */
        #loader {
            position: fixed; inset: 0; background: #000; z-index: 10000;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: 0.8s var(--apple-ease);
        }
        #loader.hidden { transform: translateY(-100%); pointer-events: none; }
        
        .loader-bar { width: 280px; height: 2px; background: rgba(255,255,255,0.1); position: relative; overflow: hidden; margin-top: 20px; }
        .loader-progress { position: absolute; left: 0; top: 0; height: 100%; background: var(--accent); width: 0%; transition: 0.4s; }
        .loader-text { font-size: 10px; font-weight: 900; letter-spacing: 5px; color: var(--accent); text-transform: uppercase; }

        /* --- HEADER --- */
        header {
            position: fixed; top: 0; width: 100%; height: 80px; padding: 0 5%;
            display: flex; justify-content: space-between; align-items: center;
            background: rgba(0, 0, 0, 0.85); backdrop-filter: blur(30px); z-index: 999;
            border-bottom: 1px solid var(--border);
        }
        .header-logo { font-weight: 900; font-size: 22px; letter-spacing: 2px; text-decoration: none; color: #fff; }
        nav { display: flex; gap: 30px; }
        nav a { color: rgba(255, 255, 255, 0.5); text-decoration: none; font-size: 13px; font-weight: 600; text-transform: uppercase; transition: 0.3s; }
        nav a.active { color: var(--accent); }

        /* --- CONTENT --- */
        .container { max-width: 1400px; margin: 0 auto; padding: 140px 5% 100px; }
        .builder-layout { display: grid; grid-template-columns: 1fr 420px; gap: 40px; align-items: start; }
        .config-sections { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; }

        .custom-select-container { margin-bottom: 10px; position: relative; }
        .category-label { font-size: 10px; font-weight: 800; color: var(--accent); text-transform: uppercase; letter-spacing: 2px; margin-bottom: 10px; display: block; padding-left: 4px; }
        
        .select-trigger {
            background: var(--surface); border: 1px solid var(--border);
            padding: 22px; border-radius: 18px; cursor: pointer;
            display: flex; justify-content: space-between; align-items: center;
            transition: 0.3s; font-size: 14px; color: #fff; font-weight: 500;
        }
        .select-trigger:hover { border-color: var(--accent); background: var(--surface-hover); }

        .options-list {
            position: absolute; top: calc(100% + 10px); left: 0; width: 100%;
            background: #0a0a0a; border: 1px solid var(--border);
            border-radius: 20px; z-index: 100; overflow: hidden;
            max-height: 0; transition: max-height 0.4s var(--apple-ease);
        }
        .options-list.open { max-height: 400px; overflow-y: auto; border-color: var(--accent); }

        .option {
            padding: 16px 24px; cursor: pointer; border-bottom: 1px solid rgba(255,255,255,0.03);
            display: flex; justify-content: space-between; align-items: center; transition: 0.2s;
        }
        .option:hover { background: var(--accent); color: #000; }

        .summary-card {
            background: var(--surface); border: 1px solid var(--border);
            padding: 40px; border-radius: 40px; position: sticky; top: 120px;
        }
        .total-price { font-size: 56px; font-weight: 900; color: var(--accent); margin-bottom: 10px; letter-spacing: -3px; }

        .add-btn {
            width: 100%; padding: 24px; background: var(--accent); color: #000;
            border: none; border-radius: 22px; font-weight: 900; cursor: pointer;
            text-transform: uppercase;
        }

        @media (max-width: 1100px) {
            .builder-layout { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <div id="loader">
        <div class="loader-text" id="loader-status">ЗАГРУЗКА СИСТЕМЫ...</div>
        <div class="loader-bar"><div class="loader-progress" id="p-bar"></div></div>
    </div>

    <header>
        <a href="#" class="header-logo">LIQUID-PC</a>
        <nav>
            <a href="#">SYSTEMS</a>
            <a href="#" class="active">BUILDER</a>
            <a href="#">STORE</a>
        </nav>
    </header>

    <main class="container">
        <h1 style="font-size: 64px; font-weight: 900; letter-spacing: -4px; margin-bottom: 20px;">BUILDER</h1>
        <div class="builder-layout">
            <div class="config-sections" id="builder-grid">
                </div>
            <div class="summary-card">
                <span style="font-size: 11px; opacity: 0.5;">ИТОГО</span>
                <div class="total-price" id="total-display">15 000 ₽</div>
                <button class="add-btn">В КОРЗИНУ</button>
            </div>
        </div>
    </main>

    <script>
        const PROFIT_MARGIN = 1.05;
        const ASSEMBLY_FEE = 15000;

        const components = {
            cpu: {
                label: "Процессор",
                items: [
                    { name: "Intel Core Ultra 9 285K", price: 82000 },
                    { name: "AMD Ryzen 9 9950X", price: 74000 },
                    { name: "Intel Core i7-14700K", price: 49000 }
                ]
            },
            gpu: {
                label: "Видеокарта",
                items: [
                    { name: "NVIDIA RTX 5090", price: 395000 },
                    { name: "NVIDIA RTX 5080", price: 185000 },
                    { name: "NVIDIA RTX 4070 Super", price: 78000 }
                ]
            },
            mboard: {
                label: "Материнская плата",
                items: [
                    { name: "ASUS Z890 Hero", price: 86000 },
                    { name: "MSI X870E GODLIKE", price: 168000 }
                ]
            }
        };

        let selections = {};

        // 1. Инициализация интерфейса
        function init() {
            const grid = document.getElementById('builder-grid');
            grid.innerHTML = '';
            for (let cat in components) {
                grid.innerHTML += `
                    <div class="custom-select-container">
                        <span class="category-label">${components[cat].label}</span>
                        <div class="select-trigger" onclick="toggle('${cat}')" id="trig-${cat}">Выбрать...</div>
                        <div class="options-list" id="list-${cat}">
                            ${components[cat].items.map((it, idx) => `
                                <div class="option" onclick="selectItem('${cat}', ${idx})">
                                    <span>${it.name}</span>
                                    <b>${Math.ceil(it.price * PROFIT_MARGIN).toLocaleString()} ₽</b>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }
        }

        // 2. Логика списков
        function toggle(cat) {
            const list = document.getElementById(`list-${cat}`);
            const isOpen = list.classList.contains('open');
            document.querySelectorAll('.options-list').forEach(el => el.classList.remove('open'));
            if (!isOpen) list.classList.add('open');
        }

        function selectItem(cat, idx) {
            const item = components[cat].items[idx];
            selections[cat] = item;
            document.getElementById(`trig-${cat}`).innerText = item.name;
            document.getElementById(`list-${cat}`).classList.remove('open');
            updateTotal();
        }

        function updateTotal() {
            let total = ASSEMBLY_FEE;
            for (let cat in selections) {
                total += Math.ceil(selections[cat].price * PROFIT_MARGIN);
            }
            document.getElementById('total-display').innerText = total.toLocaleString() + ' ₽';
        }

        // 3. Анимация загрузки
        function startLoading() {
            const bar = document.getElementById('p-bar');
            const status = document.getElementById('loader-status');
            const steps = [
                { p: 30, t: "ЗАГРУЗКА БАЗЫ..." },
                { p: 70, t: "ПРОВЕРКА СОВМЕСТИМОСТИ..." },
                { p: 100, t: "ГОТОВО" }
            ];

            let step = 0;
            const interval = setInterval(() => {
                if (step >= steps.length) {
                    clearInterval(interval);
                    document.getElementById('loader').classList.add('hidden');
                    document.body.classList.add('loaded'); // Показываем контент
                    return;
                }
                bar.style.width = steps[step].p + '%';
                status.innerText = steps[step].t;
                step++;
            }, 500);
        }

        // ГЛАВНОЕ: Запуск всего после загрузки страницы
        window.onload = () => {
            init();
            startLoading();
        };
    </script>
</body>
</html>
